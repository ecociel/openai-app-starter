<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>Minimal MCP Widget</title>
  <script src="https://cdn.jsdelivr.net/npm/@openai/skybridge@latest/dist/skybridge.js"></script>
</head>
<body>
  <h1>Minimal MCP Widget Loaded</h1>
  <p id="content">Waiting for data...</p>

  <script>
    // Connect to MCP host via Skybridge
    const mcp = new window.Skybridge.MCP({ debug: true });

    // Subscribe to tool data
    mcp.on('toolData', (data) => {
      document.getElementById('content').textContent = JSON.stringify(data, null, 2);
    });
  </script>
</body>
</html>


<!--<!DOCTYPE html>-->
<!--<html lang="en">-->
<!--  <head>-->
<!--    <meta charset="utf-8" />-->
<!--    <title>Todo list</title>-->
<!--    <style>-->
<!--      :root {-->
<!--        color: #0b0b0f;-->
<!--        font-family: "Inter", system-ui, -apple-system, sans-serif;-->
<!--      }-->

<!--      html,-->
<!--      body {-->
<!--        width: 100%;-->
<!--        min-height: 100%;-->
<!--        box-sizing: border-box;-->
<!--      }-->

<!--      body {-->
<!--        margin: 0;-->
<!--        padding: 16px;-->
<!--        background: #f6f8fb;-->
<!--      }-->

<!--      main {-->
<!--        width: 100%;-->
<!--        max-width: 360px;-->
<!--        min-height: 260px;-->
<!--        margin: 0 auto;-->
<!--        background: #fff;-->
<!--        border-radius: 16px;-->
<!--        padding: 20px;-->
<!--        box-shadow: 0 12px 24px rgba(15, 23, 42, 0.08);-->
<!--      }-->

<!--      h2 {-->
<!--        margin: 0 0 16px;-->
<!--        font-size: 1.25rem;-->
<!--      }-->

<!--      form {-->
<!--        display: flex;-->
<!--        gap: 8px;-->
<!--        margin-bottom: 16px;-->
<!--      }-->

<!--      form input {-->
<!--        flex: 1;-->
<!--        padding: 10px 12px;-->
<!--        border-radius: 10px;-->
<!--        border: 1px solid #cad3e0;-->
<!--        font-size: 0.95rem;-->
<!--      }-->

<!--      form button {-->
<!--        border: none;-->
<!--        border-radius: 10px;-->
<!--        background: #111bf5;-->
<!--        color: white;-->
<!--        font-weight: 600;-->
<!--        padding: 0 16px;-->
<!--        cursor: pointer;-->
<!--      }-->

<!--      input[type="checkbox"] {-->
<!--        accent-color: #111bf5;-->
<!--      }-->

<!--      ul {-->
<!--        list-style: none;-->
<!--        padding: 0;-->
<!--        margin: 0;-->
<!--        display: flex;-->
<!--        flex-direction: column;-->
<!--        gap: 8px;-->
<!--      }-->

<!--      li {-->
<!--        background: #f2f4fb;-->
<!--        border-radius: 12px;-->
<!--        padding: 10px 14px;-->
<!--        display: flex;-->
<!--        align-items: center;-->
<!--        gap: 10px;-->
<!--      }-->

<!--      li span {-->
<!--        flex: 1;-->
<!--      }-->

<!--      li[data-completed="true"] span {-->
<!--        text-decoration: line-through;-->
<!--        color: #6c768a;-->
<!--      }-->
<!--    </style>-->
<!--  </head>-->
<!--  <body>-->
<!--    <main>-->
<!--      <h2>Todo list</h2>-->
<!--      <form id="add-form" autocomplete="off">-->
<!--        <input id="todo-input" name="title" placeholder="Add a task" />-->
<!--        <button type="submit">Add</button>-->
<!--      </form>-->
<!--      <ul id="todo-list"></ul>-->
<!--    </main>-->

<!--    <script type="module">-->
<!--      const listEl = document.querySelector("#todo-list");-->
<!--      const formEl = document.querySelector("#add-form");-->
<!--      const inputEl = document.querySelector("#todo-input");-->

<!--      let tasks = [...(window.openai?.toolOutput?.tasks ?? [])];-->

<!--      const render = () => {-->
<!--        listEl.innerHTML = "";-->
<!--        tasks.forEach((task) => {-->
<!--          const li = document.createElement("li");-->
<!--          li.dataset.id = task.id;-->
<!--          li.dataset.completed = String(Boolean(task.completed));-->

<!--          const label = document.createElement("label");-->
<!--          label.style.display = "flex";-->
<!--          label.style.alignItems = "center";-->
<!--          label.style.gap = "10px";-->

<!--          const checkbox = document.createElement("input");-->
<!--          checkbox.type = "checkbox";-->
<!--          checkbox.checked = Boolean(task.completed);-->

<!--          const span = document.createElement("span");-->
<!--          span.textContent = task.title;-->

<!--          label.appendChild(checkbox);-->
<!--          label.appendChild(span);-->
<!--          li.appendChild(label);-->
<!--          listEl.appendChild(li);-->
<!--        });-->
<!--      };-->

<!--      const updateFromResponse = (response) => {-->
<!--        if (response?.structuredContent?.tasks) {-->
<!--          tasks = response.structuredContent.tasks;-->
<!--          render();-->
<!--        }-->
<!--      };-->

<!--      const handleSetGlobals = (event) => {-->
<!--        const globals = event.detail?.globals;-->
<!--        if (!globals?.toolOutput?.tasks) return;-->
<!--        tasks = globals.toolOutput.tasks;-->
<!--        render();-->
<!--      };-->

<!--      window.addEventListener("openai:set_globals", handleSetGlobals, {-->
<!--        passive: true,-->
<!--      });-->

<!--      const mutateTasksLocally = (name, payload) => {-->
<!--        if (name === "add_todo") {-->
<!--          tasks = [-->
<!--            ...tasks,-->
<!--            { id: crypto.randomUUID(), title: payload.title, completed: false },-->
<!--          ];-->
<!--        }-->

<!--        if (name === "complete_todo") {-->
<!--          tasks = tasks.map((task) =>-->
<!--            task.id === payload.id ? { ...task, completed: true } : task-->
<!--          );-->
<!--        }-->

<!--        if (name === "set_completed") {-->
<!--          tasks = tasks.map((task) =>-->
<!--            task.id === payload.id-->
<!--              ? { ...task, completed: payload.completed }-->
<!--              : task-->
<!--          );-->
<!--        }-->

<!--        render();-->
<!--      };-->

<!--      const callTodoTool = async (name, payload) => {-->
<!--        if (window.openai?.callTool) {-->
<!--          const response = await window.openai.callTool(name, payload);-->
<!--          updateFromResponse(response);-->
<!--          return;-->
<!--        }-->

<!--        mutateTasksLocally(name, payload);-->
<!--      };-->

<!--      formEl.addEventListener("submit", async (event) => {-->
<!--        event.preventDefault();-->
<!--        const title = inputEl.value.trim();-->
<!--        if (!title) return;-->
<!--        await callTodoTool("add_todo", { title });-->
<!--        inputEl.value = "";-->
<!--      });-->

<!--      listEl.addEventListener("change", async (event) => {-->
<!--        const checkbox = event.target;-->
<!--        if (!checkbox.matches('input[type="checkbox"]')) return;-->
<!--        const id = checkbox.closest("li")?.dataset.id;-->
<!--        if (!id) return;-->

<!--        if (!checkbox.checked) {-->
<!--          if (window.openai?.callTool) {-->
<!--            checkbox.checked = true;-->
<!--            return;-->
<!--          }-->

<!--          mutateTasksLocally("set_completed", { id, completed: false });-->
<!--          return;-->
<!--        }-->

<!--        await callTodoTool("complete_todo", { id });-->
<!--      });-->

<!--      render();-->
<!--    </script>-->
<!--  </body>-->
<!--</html>-->

<!--<!DOCTYPE html>-->
<!--<html>-->
<!--  <head>-->
<!--    <meta charset="utf-8" />-->
<!--    <title>MCP Widget</title>-->

<!--    <style>-->
<!--      body {-->
<!--        font-family: sans-serif;-->
<!--        padding: 1rem;-->
<!--      }-->
<!--      .box {-->
<!--        border: 1px solid #ccc;-->
<!--        padding: 1rem;-->
<!--        border-radius: 8px;-->
<!--        background: #f9f9f9;-->
<!--      }-->
<!--    </style>-->

<!--    <script type="module">-->
<!--      import { createIframeTransport } from "https://cdn.jsdelivr.net/npm/@openai/skybridge/+esm";-->

<!--      const transport = await createIframeTransport();-->

<!--      transport.subscribe("data", (event) => {-->
<!--        const { structuredContent, _meta } = event.data || {};-->

<!--        document.getElementById("topic").innerText =-->
<!--          structuredContent?.topic ?? "Unknown";-->
<!--        document.getElementById("summary").innerText =-->
<!--          structuredContent?.summary ?? "";-->
<!--        document.getElementById("meta").innerText =-->
<!--          JSON.stringify(_meta, null, 2);-->
<!--      });-->
<!--    </script>-->
<!--  </head>-->

<!--  <body>-->
<!--    <h2>MCP Widget</h2>-->

<!--    <div class="box">-->
<!--      <p><strong>Topic:</strong> <span id="topic"></span></p>-->
<!--      <p><strong>Summary:</strong> <span id="summary"></span></p>-->

<!--      <h4>Meta (not shown to model):</h4>-->
<!--      <pre id="meta"></pre>-->
<!--    </div>-->
<!--  </body>-->
<!--</html>-->